# Макаревич Мария, БПИ228
Индивидуальное домашнее задание 1 по дисциплине "Архитектура вычислительных систем".
**Работа выполнена на 10 баллов.**
## Вариант 26. Условие:
Разработать программу, которая вводит одномерный массив A, состоящий из N элементов (значение N вводится при выполнении программы), после чего формирует из элементов массива A новый массив B по правилам, указанным в варианте, и выводит его. Память под массивы может выделяться статически, на стеке, автоматически по выбору разработчика с учетом требований к оценке работы.

При решении задачи необходимо использовать подпрограммы для реализации ввода, вывода и формирования нового массива. Допустимы (при необходимости) дополнительные подпрограммы.

Максимальное количество элементов в массиве не должно превышать 10 (ограничение обуславливается вводом данных с клавиатуры). При этом необходимо обрабатывать некорректные значения как для нижней, так и для верхней границ массивов в зависимости от условия задачи.

Индивидуальное условие варианта: Сформировать массив B из сумм трех соседних элементов массива A, где B\[i] = A\[i−1] + A\[i] + A\[i+1]. Если элементов в массиве А менее трёх, то заполнить массив В нулями.
## Критерии на 4-5 баллов
- Приведено решение задачи на ассемблере. Ввод данных осуществляется с клавиатуры. Вывод данных осуществляется на дисплей.
- В программе должны присутствовать комментарии, поясняющие выполняемые действия.
- Допускается использование требуемых подпрограмм без параметров и локальных переменных.
- В отчете должно быть представлено полное тестовое покрытие. Приведены результаты тестовых прогонов. Например, с использованием скриншотов

Реализованы ввод данных с клавиатуры и вывод данных на дисплей. Комментарии в программе присутствуют. Реализованы подпрограммы:
- input_length, считывающая с клавиатуры значение длины массива. При некорректной длине (числе, не лежащем в промежутке от 1 до 10) она выводит сообщение об ошибке и просит повторить ввод.
- fill_array_A, заполняющая массив A известной длины числами, вводимыми пользователем.
- fill_array_B, заполняющая массив B известной длины числами, полученными по правилу B\[i] = A\[i−1] + A\[i] + A\[i+1]. При длине массива, меньшей 3, массив заполняется нулями. Также при любой длине массива его первый и последний элементы приравниваются 0, так как для них невозможно применить данную формулу.

Тесты программы присутствуют в папке [tests](tests). В конце отчета приведены скриншоты, показывающие корректную работу программы на тестах 1-4.
## Критерии на 6-7 баллов
- В программе необходимо использовать подпрограммы с передачей аргументов через параметры, отображаемые на стек.
- Внутри подпрограмм необходимо использовать локальные переменные, которые при компиляции отображаются на стек.
- В местах вызова функции добавить комментарии, описывающие передачу фактических параметров и перенос возвращаемого результата. При этом необходимо отметить, какая переменная или результат какого выражения соответствует тому или иному фактическому параметру.
- Информацию о проведенных изменениях отобразить в отчете наряду с информацией, необходимой на предыдущую оценку.

В программе реализована передача аргументов через стек в подпрограммах fill_array_A, fill_array_B.

- В fill_array_A через стек подаются адрес массива A в памяти и длина этого массива.
- В fill_array_B через стек подаются адреса массивов B и A, а также длина этих массивов (она одинакова у обоих массивов).

В подпрограммах fill_array_A, fill_array_B использованы локальные переменные, которые при компиляции отображаются на стек. 

- В fill_array_A на стек сохраняются значения ra и t3 - текущего индекса, увеличиваемого при каждой итерации цикла.
- В fill_array_B на стек сохраняются такие же значения

Отметим, что сохранение на стек значения из регистра t3 не является обязательным и присутствует лишь для того, чтобы показать пример работы со стеком.

В местах вызова функций добавлены требуемые комментарии в местах вызова функций input_length, fill_array_A, fill_array_B.
## Критерии на 8 баллов
- Разработанные подпрограммы должны поддерживать многократное использование с различными наборами исходных данных, включая возможность подключения различных исходных и результирующих массивов.
- Реализовать автоматизированное тестирование за счет создания дополнительной тестовой программы, осуществляющей прогон подпрограммы обработки массивов с различными тестовыми данными (вместо ввода данных). Осуществить прогон тестов обеспечивающих покрытие различных ситуаций. Тестовые данные можно формировать в различных исходных массивах.
- Добавить информацию о проведенных изменениях в отчет.

За счет передачи аргументов подпрограмм через стек они поддерживают многократное использование и позволяют подключать другие массивы, что проиллюстрировано в тестовой программе. Отдельная тестовая программа [создана](code/test.asm), в ней рассмотрены 4 варианта входных данных, отличных от хранящихся в папке tests. Для каждого из них на экран выведен массив A, а затем созданный на его основе массив B. Ниже в секции "Тесты" приведен скриншот ее выполнения.
## Критерии на 9 баллов
- Добавить в программу использование макросов для реализации ввода и вывода данных. Макросы должны поддерживать повторное использование с различными массивами и другими параметрами.
- Допускается обертыванием макросами уже разработанных подпрограмм.

В программе реализованы макросы, позволяющие считывать (read_int(%x)) и выводить (print_int(%x)) целые числа, выводить строки (print_str(%x)) и массивы (print_array(%adress, %length)). В макросе print_array (%adress, %length) использованы локальные переменные, которые при компиляции отображаются на стек (см. критерий на 6-7 баллов). Кроме того, для удобства реализован макрос load_array_elem(%adress_arr, %x, %ind), придающий элементу массива по заданному индексу значение, лежащее в заданном регистре, и увеличивающий индекс на 1 и адрес массива на 4 (то есть переходящий к следующему элементу массива).
## Критерии на 10 баллов
- Программа должна быть разбита на несколько единиц компиляции. При этом подпрограммы ввода–вывода должны составлять унифицированные модули, используемые повторно как в программе, осуществляющей ввод исходных данных, так и в программе, осуществляющей тестовое покрытие.
- Макросы должны быть выделены в отдельную автономную библиотеку
- Расширить отчет, дополнив его новыми данными.

Программа разбита на несколько единиц компиляции: array.asm, macroslib.s, input_length.s, fill_array_A.s, fill_array_B.s. Тестирующая программа test.asm использует те же функции, что и основная программа. Макросы выделены в отдельную библиотеку macroslib.s.
## Тесты
Корректность работы программы подтверждается прохождением 4 тестов из папки tests, а также верными результатами работы тестирующей программы на 4 других тестах.

Скриншоты работы программы на тестах 1-4:

test1

![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/81fa5795-5ad6-4ff3-bcab-c4e39047c558)

test2

![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/d651f90c-35ad-48f3-942c-a83bc4639021)
![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/ba6a49d5-ca5d-43a8-9023-f3bdb20031df)

test3

![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/b148c9f1-a9d2-475c-aa07-0f6b20713ff2)

test4

![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/0566990e-aae0-4cc1-adb0-fb63cf2f12f0)

Скриншоты работы тестирующей программы:
![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/734cbd66-ad04-4d68-97f3-e95e14a0e1ba)
![image](https://github.com/makar-with-tea/makar-with-tea-CSA-IHW1/assets/79705001/32d07070-64be-4f4b-9102-b7bbc4f44378)

